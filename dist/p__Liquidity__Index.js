(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"1OZD":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return j}));var a=n("k1fw"),o=n("9og8"),s=n("WmNS"),r=n.n(s),c=n("GUrf"),i=n("4218"),l=n("cUlj"),u=n("O/14"),b=n("nKUr");function d(e,t){return p.apply(this,arguments)}function p(){return p=Object(o["a"])(r.a.mark((function e(t,n){var a,s,b,d,p,j,g,h,O,m,f,x,v,y,k,w,S,T,C,E,N,I,q,P,A,H=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=H.length>2&&void 0!==H[2]?H[2]:u["c"],s=!(H.length>3&&void 0!==H[3])||H[3],b=H.length>4?H[4]:void 0,d=H.length>5?H[5]:void 0,p=H.length>6?H[6]:void 0,j=H.length>7?H[7]:void 0,g=H.length>8?H[8]:void 0,h=H.length>9?H[9]:void 0,O=H.length>10?H[10]:void 0,m=H.length>11?H[11]:void 0,f=H.length>12?H[12]:void 0,x=H.length>13?H[13]:void 0,v=H.length>14?H[14]:void 0,y=H.length>15?H[15]:void 0,k=H.length>16?H[16]:void 0,w=H.length>17?H[17]:void 0,S=H.length>18?H[18]:void 0,T=H.length>19?H[19]:void 0,C=H.length>20?H[20]:void 0,E=H.length>21?H[21]:void 0,N=H.length>22?H[22]:void 0,I=H.length>23?H[23]:void 0,q=H.length>24?H[24]:void 0,P=H.length>25?H[25]:void 0,e.next=26,Object(o["a"])(r.a.mark((function e(){var o,A,H,L,D,R,F,U,M,W,_,B,Y,J,K,Q,G,z,V,X,Z,$,ee,te,ne,ae,oe,se,re,ce,ie,le,ue,be,de,pe,je;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(h(!1),O(!1),m("0"),f("0"),x(!1),v(!1),y(""),k("Loading..."),w(!1),S(""),console.log(c["c"]),o=Object(u["p"])(d,p),.01*a,A=t.address,H=t.symbol,L=t.decimals,D=t.amount,R=n.address,F=n.symbol,U=n.decimals,M=n.amount,D=D||"0",M=M||"0",p&&d){e.next=19;break}return e.abrupt("return",new u["a"]("Connect to your wallet"));case 19:if(t.symbol&&n.symbol){e.next=21;break}return e.abrupt("return",new u["a"]("Please choose tokens"));case 21:if(!s||"0"!=D){e.next=23;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 23:if(s||"0"!=M){e.next=25;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 25:if(!s||""!=D){e.next=27;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 27:if(s||""!=M){e.next=29;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 29:if(!s||!isNaN(parseFloat(D))){e.next=31;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 31:if(s||!isNaN(parseFloat(M))){e.next=33;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 33:if(W="ETH"===H,_="ETH"===F,console.log(t),console.log(n),!W||!_){e.next=41;break}return k("Doesn't support ETH to ETH"),w(!1),e.abrupt("return",new u["a"]("Doesn't support ETH to ETH"));case 41:if(!(W&&"WETH"===F||"WETH"===H&&_)){e.next=45;break}return k("Invalid pair WETH/ETH"),w(!1),e.abrupt("return",new u["a"]("Invalid pair WETH/ETH"));case 45:if(console.log("ADD LIQUIDITY"),console.log("------------------ CONSTRUCT TOKEN ------------------"),B=W?c["n"][b]:new c["j"](b,A,L,H),Y=_?c["n"][b]:new c["j"](b,R,U,F),!B.equals(Y)){e.next=53;break}return k("Equal tokens"),w(!1),e.abrupt("return",new u["a"]("Equal tokens!"));case 53:return e.next=55,c["d"].fetchPairData(B,Y,d).then((e=>(console.log(e.reserve0.raw.toString()),console.log(e.reserve1.raw.toString()),e))).catch((e=>new u["a"]("".concat(B.symbol," - ").concat(Y.symbol," pool does not exist. Create one?"))));case 55:J=e.sent,console.log("pair"),console.log(J),T(J),K=!1,J instanceof u["a"]&&(K=!0),C(K),E({token0:A,token1:R}),console.log("test add to server",{token0:A,token1:R}),console.log("------------------ PARSE AMOUNT ------------------"),e.prev=65,Q=s?new c["k"](B,Object(l["b"])(D,L)):new c["k"](Y,Object(l["b"])(M,U)),e.next=79;break;case 69:if(e.prev=69,e.t0=e["catch"](65),console.log("parsedAmount"),console.log(e.t0),w(!1),"underflow"!==e.t0.fault){e.next=77;break}return k("Value too small"),e.abrupt("return",new u["a"](e.t0.fault));case 77:return k(K?"Enter both values":"Unhandled error"),e.abrupt("return",new u["a"]("Amount error"));case 79:if(K){e.next=126;break}if(console.log("estimated dependent amount"),!s){e.next=103;break}V=J.priceOf(B).quote(Q),e.prev=83,X=new c["k"](B,Object(l["b"])(D,L)),e.next=97;break;case 87:if(e.prev=87,e.t1=e["catch"](83),w(!1),"underflow"!==e.t1.fault){e.next=95;break}return k(e.t1.fault),e.abrupt("return",new u["a"](e.t1.fault));case 95:return k("Token or amount missing"),e.abrupt("return",new u["a"]("Token or amount missing"));case 97:G=B===c["b"]?c["a"].ether(X.raw):X,z=Y===c["b"]?c["a"].ether(V.raw):V,g(V.toFixed(5)),M=V.toExact(),e.next=124;break;case 103:V=J.priceOf(Y).quote(Q),e.prev=104,Z=new c["k"](Y,Object(l["b"])(M,U)),e.next=120;break;case 108:if(e.prev=108,e.t2=e["catch"](104),console.log("token0TokenAmount"),console.log(e.t2),w(!1),"underflow"!==e.t2.fault){e.next=118;break}return k(e.t2.fault),e.abrupt("return",new u["a"](e.t2.fault));case 118:return k("Token or amount missing"),e.abrupt("return",new u["a"]("Token or amount missing"));case 120:G=B===c["b"]?c["a"].ether(V.raw):V,z=Y===c["b"]?c["a"].ether(Z.raw):Z,j(V.toFixed(5)),D=V.toExact();case 124:e.next=153;break;case 126:if("0"!==D&&"0"!==M){e.next=136;break}if(!K){e.next=133;break}return w(!1),k("Create new pool"),e.abrupt("return",new u["a"]("Creating a new pool, please enter both amounts"));case 133:return w(!1),k("Add liquidity"),e.abrupt("return",new u["a"]("One field is empty, it's probably a new pool"));case 136:e.prev=136,G=new c["k"](B,Object(l["b"])(D,L)),z=new c["k"](Y,Object(l["b"])(M,U)),e.next=153;break;case 141:if(e.prev=141,e.t3=e["catch"](136),console.log("parsedToken0Amount and parsedToken1Amount"),console.log(e.t3),w(!1),"underflow"!==e.t3.fault){e.next=151;break}return k(e.t3.fault),e.abrupt("return",new u["a"](e.t3.fault));case 151:return k("Value must be a number"),e.abrupt("return",new u["a"]("Value must be a number"));case 153:return N(G),I(z),console.log("------------------ CHECK BALANCE ------------------"),e.next=158,Object(u["t"])(W?c["b"]:new c["j"](b,A,L,H),p,d);case 158:return $=e.sent,e.next=161,Object(u["t"])(_?c["b"]:new c["j"](b,R,U,F),p,d);case 161:ee=e.sent,console.log("token0 balance"),console.log($),console.log("token1 balance"),console.log(ee),e.prev=166,te=$.gte(Object(l["b"])(D,L))&&ee.gte(Object(l["b"])(M,U)),e.next=182;break;case 170:if(e.prev=170,e.t4=e["catch"](166),console.log(te),console.log(e.t4),w(!1),"underflow"!==e.t4.fault){e.next=180;break}return k(e.t4.fault),e.abrupt("return",new u["a"](e.t4.fault));case 180:return k("userHasSufficientBalance"),e.abrupt("return",new u["a"]("unknow error"));case 182:if(te){e.next=186;break}return k("Not enough balance"),w(!1),e.abrupt("return",new u["a"]("Not enough balance"));case 186:if(console.log("------------------ BREAKDOWN ------------------"),K){e.next=210;break}return e.next=190,Object(u["r"])(J.liquidityToken,d,p);case 190:ne=e.sent,console.log("Liquidity Minted"),console.log(J.liquidityToken),e.prev=193,ae=J.getLiquidityMinted(ne,G,z),oe=new c["g"](ae.raw,ne.add(ae).raw).toFixed(4),y(["Pool reserve: ".concat(J.reserve0.toFixed(3)," ").concat(J.token0.symbol," + ").concat(J.reserve1.toFixed(3)," ").concat(J.token1.symbol),"Pool share: ".concat(oe,"%")]),e.next=208;break;case 199:if(e.prev=199,e.t5=e["catch"](193),!(e.t5 instanceof c["e"])){e.next=205;break}return k("Insufficient reserve!"),w(!1),e.abrupt("return",new u["a"]("Insufficient reserve!"));case 205:return k("Unhandled exception!"),w(!1),e.abrupt("return",new u["a"]("Unhandled exception!"));case 208:e.next=211;break;case 210:y(["Ready to create ".concat(H," ").concat(F," liquidity pool.")]);case 211:if(console.log("------------------ ALLOWANCE ------------------"),se=0,W){e.next=220;break}return e.next=216,Object(u["i"])(A,G.raw.toString(),d,p);case 216:re=e.sent,console.log("token 0 approved?"),console.log(re),re||(console.log("Not enough allowance"),m(G.raw.toString()),h(!0),x(!0),se+=1);case 220:if(_){e.next=228;break}return console.log("Inside addLiquidity, amount needed: ".concat(z.raw.toString())),e.next=224,Object(u["i"])(R,z.raw.toString(),d,p);case 224:ce=e.sent,console.log("token 1 approved?"),console.log(ce),ce||(console.log("Not enough allowance for token1"),f(z.raw.toString()),O(!0),v(!0),se+=2);case 228:if(!(se>0)){e.next=232;break}return w(!1),k("Need approval"),e.abrupt("return",new u["a"]("Need approve ".concat(1===se?H:2===se?F:"".concat(H," and ").concat(F))));case 232:w(!0),k(K?"Create a new pool":"Add liquidity"),console.log("------------------ PREPARE ADD LIQUIDITY ------------------"),console.log("parsed token 0 amount"),console.log(G.raw),console.log("parsed token 1 amount"),console.log(z.raw),console.log("slippage"),console.log(a),W||_?(ie=o.estimateGas.addLiquidityETH,le=o.addLiquidityETH,de=W?Y:B,pe=W?z:G,je=W?Object(u["h"])(G,K?0:a)[0].toString():Object(u["h"])(z,K?0:a)[0].toString(),ue=[de.address,pe.raw.toString(),Object(u["h"])(pe,K?0:a)[0].toString(),je,p,"0x".concat((Math.floor((new Date).getTime()/1e3)+60).toString(16))],be=i["a"].from((_?z:G).raw.toString()),console.log(be)):(ie=o.estimateGas.addLiquidity,le=o.addLiquidity,ue=[A,R,G.raw.toString(),z.raw.toString(),Object(u["h"])(G,K?0:a)[0].toString(),Object(u["h"])(z,K?0:a)[0].toString(),p,"0x".concat((Math.floor((new Date).getTime()/1e3)+60).toString(16))],be=null),console.log("args"),console.log(ue),console.log("estimate"),console.log(ie),console.log("method"),console.log(le),console.log("value"),console.log(be),q(ue),P(be);case 252:case"end":return e.stop()}}),e,null,[[65,69],[83,87],[104,108],[136,141],[166,170],[193,199]])})))();case 26:A=e.sent,A instanceof u["a"]?k(A.getErrorText()):console.log(A);case 28:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function j(e,t){return g.apply(this,arguments)}function g(){return g=Object(o["a"])(r.a.mark((function e(t,n){var s,i,l,d,p,j,g,h,O,m,f,x,v,y,k,w=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=w.length>2&&void 0!==w[2]?w[2]:u["c"],!(w.length>3&&void 0!==w[3])||w[3],i=w.length>4?w[4]:void 0,l=w.length>5?w[5]:void 0,d=w.length>6?w[6]:void 0,p=w.length>7?w[7]:void 0,j=w.length>8?w[8]:void 0,g=w.length>9?w[9]:void 0,h=w.length>10?w[10]:void 0,O=w.length>11?w[11]:void 0,m=w.length>12?w[12]:void 0,f=w.length>13?w[13]:void 0,x=w.length>14?w[14]:void 0,v=w.length>15?w[15]:void 0,e.next=16,Object(o["a"])(r.a.mark((function e(){var o,b,f,x,v,y,k,w,S,T,C,E,N,I;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(c["c"]),o=Object(u["p"])(l,d),b=t.address,f=t.symbol,x=t.decimals,t.amount,v=n.address,y=n.symbol,k=n.decimals,n.amount,w="ETH"===f,S="ETH"===y,console.log("------------------ RECEIVED TOKEN ------------------"),console.log("token0"),console.log(t),console.log("token1"),console.log(n),!w||!S){e.next=13;break}return e.abrupt("return",new u["a"]("Doesn't support ETH to ETH"));case 13:if(!(w&&"WETH"===y||"WETH"===f&&S)){e.next=15;break}return e.abrupt("return",new u["a"]("Invalid pair WETH/ETH"));case 15:if(console.log("ADD LIQUIDITY"),console.log("------------------ CONSTRUCT TOKEN ------------------"),T=w?c["n"][i]:new c["j"](i,b,x,f),C=S?c["n"][i]:new c["j"](i,v,k,y),!T.equals(C)){e.next=21;break}return e.abrupt("return",new u["a"]("Equal tokens!"));case 21:return console.log("------------------ CONSTRUCT PAIR ------------------"),console.log("FETCH pair"),console.log(p),console.log(j),console.log("------------------ PARSE AMOUNT ------------------"),console.log(g),console.log(h),console.log("------------------ CHECK BALANCE ------------------"),console.log("------------------ BREAKDOWN ------------------"),console.log("------------------ ALLOWANCE ------------------"),console.log("------------------ PREPARE ADD LIQUIDITY ------------------"),w||S?(E=o.estimateGas.addLiquidityETH,N=o.addLiquidityETH,console.log(O),console.log(m)):(E=o.estimateGas.addLiquidity,N=o.addLiquidity,console.log(O),console.log(m)),console.log("parsed token 0 amount"),console.log(g.raw),console.log("parsed token 1 amount"),console.log(h.raw),console.log("slippage"),console.log(s),console.log(E),console.log(N),console.log(O),console.log(m),e.next=45,E(...O,m?{value:m}:{}).then((e=>N(...O,Object(a["a"])(Object(a["a"])({},m?{value:m}:{}),{},{gasLimit:Object(u["g"])(e)})).catch((e=>new u["a"]("CustomError in transaction")))));case 45:return I=e.sent,e.abrupt("return",I);case 47:case"end":return e.stop()}}),e)})))();case 16:return y=e.sent,y instanceof u["a"]?(f(y.getErrorText()),x("Please try again")):(console.log("status"),console.log(y),k="https://rinkeby.etherscan.io/tx/"+y.hash,v(y),f(Object(b["jsx"])("a",{href:k,target:"_blank",children:"View it on etherscan"}))),e.abrupt("return");case 19:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},"2u47":function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},N82c:function(e){e.exports=JSON.parse("{}")},QEXP:function(e,t,n){e.exports=n.p+"static/loading.fbc4a581.svg"},R1Dz:function(e,t,n){"use strict";var a=n("q1tI");t["a"]=Object(a["createContext"])()},"S/9j":function(e,t,n){"use strict";function a(e){var t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/".concat(t.slice(0,n+1).join("/"))))}n.d(t,"a",(function(){return a}))},kiEm:function(e,t,n){"use strict";n.r(t);n("+L6B");var a,o,s=n("2/Rp"),r=n("q1tI"),c=n("9kvl"),i=n("THqM"),l=(n("Pwec"),n("CtXQ")),u=(n("5NDa"),n("5rEg")),b=n("k1fw"),d=n("9og8"),p=n("tJVT"),j=n("WmNS"),g=n.n(j),h=n("nkYg"),O=n("vDqi"),m=n.n(O),f=n("+Ri4"),x=n.n(f),v=(n("+n12"),n("Z6YE")),y=n("jUKV"),k=n("O/14"),w=(n("2u47"),n("N82c"),n("GUrf"),n("1OZD")),S=(n("QEXP"),n("wd/R")),T=n.n(S),C=n("nKUr"),E=i["t"].AcyTabPane,N=e=>{for(var t=e.dispatch,n=e.token,a=e.onLoggedIn,o=Object(r["useState"])(null),c=Object(p["a"])(o,2),j=c[0],O=c[1],f=Object(r["useState"])(!0),S=Object(p["a"])(f,2),N=S[0],I=S[1],q=h["a"][0],P=h["a"][1],A=0;A<h["a"].length;A++)h["a"][A].symbol==(null===n||void 0===n?void 0:n.token1)&&(q=h["a"][A]),h["a"][A].symbol==(null===n||void 0===n?void 0:n.token2)&&(P=h["a"][A]);var H=Object(r["useState"])(q),L=Object(p["a"])(H,2),D=L[0],R=L[1],F=Object(r["useState"])(P),U=Object(p["a"])(F,2),M=U[0],W=U[1],_=Object(r["useState"])("0"),B=Object(p["a"])(_,2),Y=B[0],J=B[1],K=Object(r["useState"])("0"),Q=Object(p["a"])(K,2),G=Q[0],z=Q[1],V=Object(r["useState"])(),X=Object(p["a"])(V,2),Z=X[0],$=X[1],ee=Object(r["useState"])(),te=Object(p["a"])(ee,2),ne=te[0],ae=te[1],oe=Object(r["useState"])(!1),se=Object(p["a"])(oe,2),re=se[0],ce=se[1],ie=Object(r["useState"])(!1),le=Object(p["a"])(ie,2),ue=le[0],be=le[1],de=Object(r["useState"])(!0),pe=Object(p["a"])(de,2),je=pe[0],ge=pe[1],he=Object(r["useState"])(k["c"]/100),Oe=Object(p["a"])(he,2),me=Oe[0],fe=Oe[1],xe=Object(r["useState"])(k["c"]/100),ve=Object(p["a"])(xe,2),ye=ve[0],ke=ve[1],we=Object(r["useState"])(""),Se=Object(p["a"])(we,2),Te=Se[0],Ce=Se[1],Ee=Object(r["useState"])(!1),Ne=Object(p["a"])(Ee,2),Ie=(Ne[0],Ne[1]),qe=Object(r["useState"])(!1),Pe=Object(p["a"])(qe,2),Ae=(Pe[0],Pe[1]),He=Object(r["useState"])("0"),Le=Object(p["a"])(He,2),De=(Le[0],Le[1]),Re=Object(r["useState"])("0"),Fe=Object(p["a"])(Re,2),Ue=(Fe[0],Fe[1]),Me=Object(r["useState"])(!1),We=Object(p["a"])(Me,2),_e=(We[0],We[1]),Be=Object(r["useState"])(!1),Ye=Object(p["a"])(Be,2),Je=(Ye[0],Ye[1]),Ke=Object(r["useState"])(),Qe=Object(p["a"])(Ke,2),Ge=Qe[0],ze=Qe[1],Ve=Object(r["useState"])("Connect to wallet"),Xe=Object(p["a"])(Ve,2),Ze=Xe[0],$e=Xe[1],et=Object(r["useState"])(!0),tt=Object(p["a"])(et,2),nt=tt[0],at=tt[1],ot=Object(r["useState"])(),st=Object(p["a"])(ot,2),rt=st[0],ct=st[1],it=Object(r["useState"])(),lt=Object(p["a"])(it,2),ut=lt[0],bt=lt[1],dt=Object(r["useState"])(),pt=Object(p["a"])(dt,2),jt=pt[0],gt=pt[1],ht=Object(r["useState"])(null),Ot=Object(p["a"])(ht,2),mt=Ot[0],ft=Ot[1],xt=Object(r["useState"])(),vt=Object(p["a"])(xt,2),yt=vt[0],kt=vt[1],wt=Object(r["useState"])(),St=Object(p["a"])(wt,2),Tt=St[0],Ct=St[1],Et=Object(r["useState"])(),Nt=Object(p["a"])(Et,2),It=Nt[0],qt=Nt[1],Pt=Object(r["useState"])(),At=Object(p["a"])(Pt,2),Ht=At[0],Lt=At[1],Dt=Object(r["useState"])(""),Rt=Object(p["a"])(Dt,2),Ft=Rt[0],Ut=Rt[1],Mt=Object(r["useState"])(h["a"]),Wt=Object(p["a"])(Mt,2),_t=Wt[0],Bt=Wt[1],Yt=Object(r["useState"])(!1),Jt=Object(p["a"])(Yt,2),Kt=(Jt[0],Jt[1],Object(r["useState"])(!1)),Qt=Object(p["a"])(Kt,2),Gt=(Qt[0],Qt[1],Object(r["useState"])(!1)),zt=Object(p["a"])(Gt,2),Vt=zt[0],Xt=zt[1],Zt=e=>{Ut(e.target.value),Bt(h["a"].filter((t=>t.symbol.includes(e.target.value.toUpperCase()))))},$t=Object(r["useState"])([]),en=Object(p["a"])($t,2),tn=(en[0],en[1],Object(v["b"])()),nn=tn.account,an=tn.chainId,on=tn.library,sn=tn.activate,rn=new y["a"]({supportedChainIds:[1,3,4,5,42,80001]});Object(r["useEffect"])((()=>{sn(rn);var e=JSON.parse(localStorage.getItem("tokens_symbol"));null!=e&&hn(h["a"].filter((t=>e.includes(t.symbol))))}),[nn]);var cn=Object(r["useCallback"])(Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(D&&M){e.next=2;break}return e.abrupt("return");case 2:if(je){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(w["b"])(Object(b["a"])(Object(b["a"])({},D),{},{amount:Z}),Object(b["a"])(Object(b["a"])({},M),{},{amount:ne}),100*me,je,an,on,nn,$,ae,Ie,Ae,De,Ue,_e,Je,ze,$e,at,ct,bt,gt,ft,kt,Ct,qt,Lt);case 6:case"end":return e.stop()}}),e)}))),[D,M,Z,ne,me,je,an,on,nn]),ln=Object(r["useCallback"])(Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(D&&M){e.next=2;break}return e.abrupt("return");case 2:if(!je){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(w["b"])(Object(b["a"])(Object(b["a"])({},D),{},{amount:Z}),Object(b["a"])(Object(b["a"])({},M),{},{amount:ne}),100*me,je,an,on,nn,$,ae,Ie,Ae,De,Ue,_e,Je,ze,$e,at,ct,bt,gt,ft,kt,Ct,qt,Lt);case 6:case"end":return e.stop()}}),e)}))),[D,M,Z,ne,me,je,an,on,nn]);Object(r["useEffect"])((()=>{cn()}),[D,M,Z,ne,me,je,an,on,nn]),Object(r["useEffect"])((()=>{ln()}),[D,M,Z,ne,me,je,an,on,nn]),Object(r["useEffect"])((()=>{void 0==nn?(at(!0),$e("Connect to Wallet")):($e("Choose tokens and amount"),at(!1),a())}),[an,on,nn]),Object(r["useEffect"])((()=>{var e=()=>document.getElementById("liquidity-token-search-input").focus();!0===j&&setTimeout(e,100)}),[j]);var un=()=>{O(!0)},bn=()=>{O(!1)};Object(r["useEffect"])((()=>{function e(){return t.apply(this,arguments)}function t(){return t=Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ce(!0),be(!0),e.t0=J,e.next=5,Object(k["s"])(D,an,nn,on);case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=z,e.next=10,Object(k["s"])(M,an,nn,on);case 10:e.t3=e.sent,(0,e.t2)(e.t3);case 12:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}nn&&an&&on&&(console.log("get balances in liquidity"),e())}),[nn,an,on,D,M]);var dn=function(){var e=Object(d["a"])(g.a.mark((function e(t){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(bn(),!N){e.next=15;break}if(void 0!=nn){e.next=6;break}alert("Please connect to your account"),e.next=13;break;case 6:return R(t),e.t0=J,e.next=10,Object(k["s"])(t,an,nn,on);case 10:e.t1=e.sent,(0,e.t0)(e.t1),ce(!0);case 13:e.next=26;break;case 15:if(void 0!=nn){e.next=19;break}alert("Please connect to your account"),e.next=26;break;case 19:return W(t),e.t2=z,e.next=23,Object(k["s"])(t,an,nn,on);case 23:e.t3=e.sent,(0,e.t2)(e.t3),be(!0);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn=Object(r["useState"])([]),jn=Object(p["a"])(pn,2),gn=jn[0],hn=jn[1],On=e=>{hn((t=>{var n=[...t];if(n.includes(e)){var a=n.filter((t=>t!=e));return localStorage.setItem("token",JSON.stringify(a.map((e=>e.addressOnEth)))),localStorage.setItem("tokens_symbol",JSON.stringify(a.map((e=>e.symbol)))),a}return n.push(e),localStorage.setItem("token",JSON.stringify(n.map((e=>e.addressOnEth)))),localStorage.setItem("tokens_symbol",JSON.stringify(n.map((e=>e.symbol)))),n}))},mn=n=>{console.log("test status:",n);var a=e.transaction.transactions,o=a.filter((e=>e.hash==n.hash)).length;console.log("is current dispatched? ",o),0==o&&t({type:"transaction/addTransaction",payload:{transactions:[...a,{hash:n.hash}]}}),console.log("test test see how many times setInterval is called");var s=function(){var e=Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,on.getTransactionReceipt(n.hash).then(function(){var e=Object(d["a"])(g.a.mark((function e(o){var r,c,i,l;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("receipt ",o),o){e.next=5;break}setTimeout(s,500),e.next=14;break;case 5:return e.next=7,on.getBlock(o.logs[0].blockNumber).then((e=>{r=T()(parseInt(1e3*e.timestamp)).format("YYYY-MM-DD HH:mm:ss"),console.log("test transactionTime: ",r)}));case 7:console.log("test pair to add on server",mt),mt&&(c=mt.token0,i=mt.token1,m.a.post("https://api.acy.finance/api/pool/update?walletId=".concat(nn,"&action=add&token0=").concat(c,"&token1=").concat(i)).then((e=>{console.log("add to server return: ",e)})).catch((e=>console.log("error: ",e)))),l=a.filter((e=>e.hash!=n.hash)),t({type:"transaction/addTransaction",payload:{transactions:[...l,{hash:n.hash,transactionTime:r}]}}),t({type:"liquidity/setRefreshTable",payload:!0}),console.log(Ze),$e("Done");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s()},fn=e.liquidity;return Object(r["useEffect"])(Object(d["a"])(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("liquidity updated"),console.log("liquidity state: ",fn),t=fn.token0,n=fn.token1,console.log("new tokens to set in addComponent, ",t,n),!t||!n){e.next=24;break}return Xt(!0),setTimeout((()=>Xt(!1)),1e3),t=_t.filter((e=>e.symbol===t.symbol))[0],n=_t.filter((e=>e.symbol===n.symbol))[0],console.log("fetched token ds",t,n),R(t),e.t0=J,e.next=14,Object(k["s"])(t,an,nn,on);case 14:return e.t1=e.sent,(0,e.t0)(e.t1),ce(!0),W(n),e.t2=z,e.next=21,Object(k["s"])(n,an,nn,on);case 21:e.t3=e.sent,(0,e.t2)(e.t3),be(!0);case 24:case"end":return e.stop()}}),e)}))),[fn.token0,fn.token1]),Object(C["jsx"])("div",{className:Vt?x.a.shake:null,children:Object(C["jsx"])(i["e"],{style:{backgroundColor:"#0e0304",padding:"10px"},children:Object(C["jsx"])("div",{className:x.a.addLiquidity,children:Object(C["jsxs"])("div",{className:x.a.addComponent,children:[Object(C["jsx"])(i["j"],{icon:"eth",title:re&&"Balance: ".concat(parseFloat(Y).toFixed(5)),logoURI:D&&D.logoURI,coin:D&&D.symbol||"Select",yuan:"566.228",dollar:"".concat(Y),token:Z,onChoseToken:Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:un(),I(!0);case 2:case"end":return e.stop()}}),e)}))),onChangeToken:e=>{console.log("onChangeToken"),ge(!0),$(e)}}),Object(C["jsx"])("div",{style:{margin:"12px auto",textAlign:"center"},children:Object(C["jsx"])(i["l"],{width:21.5,name:"plus_light"})}),Object(C["jsx"])(i["j"],{icon:"eth",title:ue&&"Balance: ".concat(parseFloat(G).toFixed(5)),logoURI:M&&M.logoURI,coin:M&&M.symbol||"Select",yuan:"566.228",dollar:"".concat(G),token:ne,onChoseToken:Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:un(),I(!1);case 2:case"end":return e.stop()}}),e)}))),onChangeToken:e=>{ge(!1),ae(e)}}),Object(C["jsx"])(i["k"],{children:Ge&&Object(C["jsxs"])(C["Fragment"],{children:[Object(C["jsx"])("div",{className:x.a.breakdownTopContainer,children:Object(C["jsxs"])("div",{className:x.a.slippageContainer,children:[Object(C["jsx"])("span",{style:{fontWeight:600},children:"Slippage tolerance"}),Object(C["jsxs"])("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"7px"},children:[Object(C["jsx"])(s["a"],{type:"link",style:{marginRight:"5px"},children:"Auto"}),Object(C["jsx"])(u["a"],{value:ye||"",onChange:e=>{ke(e.target.value)},suffix:Object(C["jsx"])("strong",{children:"%"})}),Object(C["jsx"])(s["a"],{type:"primary",style:{marginLeft:"10px",background:"#2e3032",borderColor:"transparent"},onClick:()=>{isNaN(ye)?Ce("Please input valid slippage value!"):(Ce(""),fe(parseFloat(ye)))},children:"Set"})]}),Te.length>0&&Object(C["jsx"])("span",{style:{fontWeight:600,color:"#c6224e"},children:Te})]})}),Object(C["jsx"])("div",{className:x.a.acyDescriptionContainer,children:Ge.map((e=>Object(C["jsx"])(i["k"].Item,{children:Object(C["jsx"])("div",{className:x.a.acyDescriptionItem,children:e})})))})]})}),Object(C["jsx"])(i["d"],{variant:"success",disabled:!nt,onClick:Object(d["a"])(g.a.mark((function e(){return g.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!=nn){e.next=6;break}sn(rn),$e("Choose tokens and amount"),at(!1),e.next=10;break;case 6:return at(!1),$e(Object(C["jsxs"])(C["Fragment"],{children:["Processing ",Object(C["jsx"])(l["a"],{type:"loading"})]})),e.next=10,Object(w["a"])(Object(b["a"])(Object(b["a"])({},D),{},{amount:Z}),Object(b["a"])(Object(b["a"])({},M),{},{amount:ne}),100*me,je,an,on,nn,ut,jt,yt,Tt,It,Ht,ct,$e,mn);case 10:case"end":return e.stop()}}),e)}))),children:Ze}),Object(C["jsx"])(i["k"],{children:rt&&Object(C["jsx"])(i["k"].Item,{children:rt})}),Object(C["jsxs"])(i["p"],{onCancel:bn,width:400,visible:j,children:[Object(C["jsx"])("div",{className:x.a.title,children:"Select a token"}),Object(C["jsx"])("div",{className:x.a.search,children:Object(C["jsx"])(u["a"],{size:"large",style:{backgroundColor:"#373739",borderRadius:"40px"},placeholder:"Enter the token symbol or address",value:Ft,onChange:Zt,id:"liquidity-token-search-input"})}),Object(C["jsx"])("div",{className:x.a.coinList,children:Object(C["jsxs"])(i["t"],{children:[Object(C["jsx"])(E,{tab:"All",children:_t.map(((e,t)=>Object(C["jsx"])(i["g"],{data:e,customIcon:!1,setAsFav:()=>On(e),selectToken:()=>{dn(e)},isFav:gn.includes(e)},t)))},"1"),Object(C["jsx"])(E,{tab:"Favorite",children:gn.map(((e,t)=>Object(C["jsx"])(i["g"],{data:e,selectToken:()=>On(t),customIcon:!1,index:t,setAsFav:()=>On(n),hideFavButton:!0,isFav:gn.includes(e)},t)))},"2")]})})]})]})})})})},I=Object(c["b"])((e=>{var t=e.global,n=e.transaction,a=e.loading,o=e.liquidity;return{global:t,transaction:n,loading:a.global,liquidity:o}}))(N),q=n("zHco"),P=n("EYsQ"),A=n.n(P),H=i["t"].AcyTabPane,L=(a=Object(c["b"])((e=>{var t=e.profile,n=e.loading;return{profile:t,loading:n.effects["profile/fetchBasic"]}})),a(o=class extends r["Component"]{constructor(){super(...arguments),this.state={visible:!1,visibleConfirmOrder:!1,visibleLoading:!1,tabIndex:1,loggedIn:!1},this.lineTitleRender=()=>[Object(C["jsxs"])("div",{children:[Object(C["jsxs"])("div",{className:A.a.maintitle,children:[Object(C["jsx"])("span",{className:A.a.lighttitle,children:"ETH"}),"/BTC"]}),Object(C["jsxs"])("div",{className:A.a.secondarytitle,children:[Object(C["jsx"])("span",{className:A.a.lighttitle,children:"212.123"})," ",Object(C["jsx"])("span",{className:A.a.percentage,children:"+12.45%"})," 2021.07.11"]})]}),Object(C["jsx"])(i["q"],{onhandPeriodTimeChoose:this.onhandPeriodTimeChoose,className:A.a.pt,times:["1D","7D","1M","1Y","All"]})],this.onhandPeriodTimeChoose=e=>{console.log(e)},this.onClickCoin=()=>{this.setState({visible:!0})},this.onCancel=()=>{this.setState({visible:!1})},this.onHandModalConfirmOrder=e=>{this.setState({visibleConfirmOrder:!!e})},this.onChangeTabs=e=>{this.setState({tabIndex:e})},this.onLoggedIn=()=>{this.setState({loggedIn:!0})}}componentDidMount(){}render(){var e=this.state,t=e.visible,n=e.visibleConfirmOrder,a=e.visibleLoading,o=(e.tabIndex,e.loggedIn),r=null;return this.props.location.state&&(r=this.props.location.state,console.log(r)),Object(C["jsxs"])(q["a"],{children:[Object(C["jsxs"])("div",{className:o?A.a.main:A.a.main_notLoggedIn,children:[Object(C["jsx"])("div",{children:o&&Object(C["jsx"])(i["o"],{})}),Object(C["jsx"])("div",{children:Object(C["jsx"])(I,{onLoggedIn:this.onLoggedIn})})]}),Object(C["jsxs"])(i["p"],{onCancel:this.onCancel,width:600,visible:t,children:[Object(C["jsxs"])("div",{className:A.a.title,children:[Object(C["jsx"])(i["l"],{name:"back"})," Select a token"]}),Object(C["jsx"])("div",{className:A.a.search,children:Object(C["jsx"])(i["m"],{placeholder:"Enter the token symbol or address",suffix:Object(C["jsx"])(i["l"],{name:"search"})})}),Object(C["jsx"])("div",{className:A.a.coinList,children:Object(C["jsxs"])(i["t"],{children:[Object(C["jsxs"])(H,{tab:"All",children:[Object(C["jsx"])(i["g"],{}),Object(C["jsx"])(i["g"],{}),Object(C["jsx"])(i["g"],{}),Object(C["jsx"])(i["g"],{})]},"1"),Object(C["jsx"])(H,{tab:"Favorite"},"2"),Object(C["jsx"])(H,{tab:"Index"},"3"),Object(C["jsx"])(H,{tab:"Synth"},"4")]})})]}),Object(C["jsx"])(i["h"],{onCancel:this.onHandModalConfirmOrder,title:"Comfirm Order",visible:n,children:Object(C["jsxs"])("div",{className:A.a.confirm,children:[Object(C["jsx"])("p",{children:"ETH\uff1a 566.228"}),Object(C["jsx"])("p",{children:"BTC\uff1a2.669"}),Object(C["jsx"])("p",{children:"Price\uff1a212.123"}),Object(C["jsx"])("p",{children:"Price Impact\uff1a2.232%"}),Object(C["jsx"])("p",{children:"Liquidity Provide Fee: 0.321%"}),Object(C["jsx"])("p",{children:"Alpha: 0.371%"}),Object(C["jsx"])("p",{children:"Maximum sold: 566.221"}),Object(C["jsx"])(s["a"],{size:"large",type:"primary",children:"Confirm"})]})}),Object(C["jsx"])(i["b"],{onCancel:()=>this.setState({visibleLoading:!1}),visible:a})]})}})||o);t["default"]=L},zHco:function(e,t,n){"use strict";var a=n("PpiC"),o=n("q1tI"),s=(n("cWXX"),n("/ezw"),n("k1fw"),n("Znn+"),n("ZTPi")),r=(n("TSYQ"),n("PCKb"),n("sPJy"),n("bE4q"),n("vRGJ"),n("S/9j"),n("nKUr"));o["PureComponent"];s["a"].TabPane;o["PureComponent"];var c=n("9kvl"),i=n("GvbY"),l=n.n(i);class u extends o["PureComponent"]{render(){var e=this.props,t=e.contentWidth,n=e.children,a="".concat(l.a.main);return"Fixed"===t&&(a="".concat(l.a.main," ").concat(l.a.wide)),Object(r["jsx"])("div",{className:a,children:n})}}var b=Object(c["b"])((e=>{var t=e.setting;return{contentWidth:t.contentWidth}}))(u),d=n("U0CE"),p=n.n(d),j=(n("R1Dz"),e=>{var t=e.children,n=(e.contentWidth,e.wrapperClassName),o=e.top;Object(a["a"])(e,["children","contentWidth","wrapperClassName","top"]);return Object(r["jsxs"])("div",{style:{margin:"-24px -24px 0"},className:n,children:[o,t?Object(r["jsx"])("div",{className:p.a.content,children:Object(r["jsx"])(b,{children:t})}):null]})});t["a"]=Object(c["b"])((e=>{var t=e.setting;return{contentWidth:t.contentWidth}}))(j)}}]);