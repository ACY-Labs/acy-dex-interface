(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"1OZD":function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var a=n("k1fw"),o=n("9og8"),r=n("WmNS"),c=n.n(r),s=n("GUrf"),i=n("4218"),l=n("cUlj"),u=n("O/14"),b=n("nKUr");function d(e,t){return j.apply(this,arguments)}function j(){return j=Object(o["a"])(c.a.mark((function e(t,n){var a,r,b,d,j,h,p,g,O,x,m,f,v,k,w,y,S,T,C,E,N,I,q,A,P,L=arguments;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=L.length>2&&void 0!==L[2]?L[2]:u["c"],r=!(L.length>3&&void 0!==L[3])||L[3],b=L.length>4?L[4]:void 0,d=L.length>5?L[5]:void 0,j=L.length>6?L[6]:void 0,h=L.length>7?L[7]:void 0,p=L.length>8?L[8]:void 0,g=L.length>9?L[9]:void 0,O=L.length>10?L[10]:void 0,x=L.length>11?L[11]:void 0,m=L.length>12?L[12]:void 0,f=L.length>13?L[13]:void 0,v=L.length>14?L[14]:void 0,k=L.length>15?L[15]:void 0,w=L.length>16?L[16]:void 0,y=L.length>17?L[17]:void 0,S=L.length>18?L[18]:void 0,T=L.length>19?L[19]:void 0,C=L.length>20?L[20]:void 0,E=L.length>21?L[21]:void 0,N=L.length>22?L[22]:void 0,I=L.length>23?L[23]:void 0,q=L.length>24?L[24]:void 0,A=L.length>25?L[25]:void 0,e.next=26,Object(o["a"])(c.a.mark((function e(){var o,P,L,H,D,R,U,F,W,B,M,Y,J,K,Q,G,z,V,_,X,Z,$,ee,te,ne,ae,oe,re,ce,se,ie,le,ue,be,de,je,he;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g(!1),O(!1),x("0"),m("0"),f(!1),v(!1),k(""),w("Loading..."),y(!1),S(""),console.log(s["c"]),o=Object(u["p"])(d,j),.01*a,P=t.address,L=t.symbol,H=t.decimals,D=t.amount,R=n.address,U=n.symbol,F=n.decimals,W=n.amount,D=D||"0",W=W||"0",j&&d){e.next=19;break}return e.abrupt("return",new u["a"]("Connect to your wallet"));case 19:if(t.symbol&&n.symbol){e.next=21;break}return e.abrupt("return",new u["a"]("Please choose tokens"));case 21:if(!r||"0"!=D){e.next=23;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 23:if(r||"0"!=W){e.next=25;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 25:if(!r||""!=D){e.next=27;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 27:if(r||""!=W){e.next=29;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 29:if(!r||!isNaN(parseFloat(D))){e.next=31;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 31:if(r||!isNaN(parseFloat(W))){e.next=33;break}return e.abrupt("return",new u["a"]("Please enter amount"));case 33:if(B="ETH"===L,M="ETH"===U,console.log(t),console.log(n),!B||!M){e.next=41;break}return w("Doesn't support ETH to ETH"),y(!1),e.abrupt("return",new u["a"]("Doesn't support ETH to ETH"));case 41:if(!(B&&"WETH"===U||"WETH"===L&&M)){e.next=45;break}return w("Invalid pair WETH/ETH"),y(!1),e.abrupt("return",new u["a"]("Invalid pair WETH/ETH"));case 45:if(console.log("ADD LIQUIDITY"),console.log("------------------ CONSTRUCT TOKEN ------------------"),Y=B?s["n"][b]:new s["j"](b,P,H,L),J=M?s["n"][b]:new s["j"](b,R,F,U),!Y.equals(J)){e.next=53;break}return w("Equal tokens"),y(!1),e.abrupt("return",new u["a"]("Equal tokens!"));case 53:return e.next=55,s["d"].fetchPairData(Y,J,d).then((e=>(console.log(e.reserve0.raw.toString()),console.log(e.reserve1.raw.toString()),e))).catch((e=>new u["a"]("".concat(Y.symbol," - ").concat(J.symbol," pool does not exist. Create one?"))));case 55:K=e.sent,console.log("pair"),console.log(K),T(K),Q=!1,K instanceof u["a"]&&(Q=!0),C(Q),E({token0:P,token1:R}),console.log("test add to server",{token0:P,token1:R}),console.log("------------------ PARSE AMOUNT ------------------"),e.prev=65,G=r?new s["k"](Y,Object(l["b"])(D,H)):new s["k"](J,Object(l["b"])(W,F)),e.next=79;break;case 69:if(e.prev=69,e.t0=e["catch"](65),console.log("parsedAmount"),console.log(e.t0),y(!1),"underflow"!==e.t0.fault){e.next=77;break}return w("Value too small"),e.abrupt("return",new u["a"](e.t0.fault));case 77:return w(Q?"Enter both values":"Unhandled error"),e.abrupt("return",new u["a"]("Amount error"));case 79:if(Q){e.next=126;break}if(console.log("estimated dependent amount"),!r){e.next=103;break}_=K.priceOf(Y).quote(G),e.prev=83,X=new s["k"](Y,Object(l["b"])(D,H)),e.next=97;break;case 87:if(e.prev=87,e.t1=e["catch"](83),y(!1),"underflow"!==e.t1.fault){e.next=95;break}return w(e.t1.fault),e.abrupt("return",new u["a"](e.t1.fault));case 95:return w("Token or amount missing"),e.abrupt("return",new u["a"]("Token or amount missing"));case 97:z=Y===s["b"]?s["a"].ether(X.raw):X,V=J===s["b"]?s["a"].ether(_.raw):_,p(_.toFixed(5)),W=_.toExact(),e.next=124;break;case 103:_=K.priceOf(J).quote(G),e.prev=104,Z=new s["k"](J,Object(l["b"])(W,F)),e.next=120;break;case 108:if(e.prev=108,e.t2=e["catch"](104),console.log("token0TokenAmount"),console.log(e.t2),y(!1),"underflow"!==e.t2.fault){e.next=118;break}return w(e.t2.fault),e.abrupt("return",new u["a"](e.t2.fault));case 118:return w("Token or amount missing"),e.abrupt("return",new u["a"]("Token or amount missing"));case 120:z=Y===s["b"]?s["a"].ether(_.raw):_,V=J===s["b"]?s["a"].ether(Z.raw):Z,h(_.toFixed(5)),D=_.toExact();case 124:e.next=153;break;case 126:if("0"!==D&&"0"!==W){e.next=136;break}if(!Q){e.next=133;break}return y(!1),w("Create new pool"),e.abrupt("return",new u["a"]("Creating a new pool, please enter both amounts"));case 133:return y(!1),w("Add liquidity"),e.abrupt("return",new u["a"]("One field is empty, it's probably a new pool"));case 136:e.prev=136,z=new s["k"](Y,Object(l["b"])(D,H)),V=new s["k"](J,Object(l["b"])(W,F)),e.next=153;break;case 141:if(e.prev=141,e.t3=e["catch"](136),console.log("parsedToken0Amount and parsedToken1Amount"),console.log(e.t3),y(!1),"underflow"!==e.t3.fault){e.next=151;break}return w(e.t3.fault),e.abrupt("return",new u["a"](e.t3.fault));case 151:return w("Value must be a number"),e.abrupt("return",new u["a"]("Value must be a number"));case 153:return N(z),I(V),console.log("------------------ CHECK BALANCE ------------------"),e.next=158,Object(u["t"])(B?s["b"]:new s["j"](b,P,H,L),j,d);case 158:return $=e.sent,e.next=161,Object(u["t"])(M?s["b"]:new s["j"](b,R,F,U),j,d);case 161:ee=e.sent,console.log("token0 balance"),console.log($),console.log("token1 balance"),console.log(ee),e.prev=166,te=$.gte(Object(l["b"])(D,H))&&ee.gte(Object(l["b"])(W,F)),e.next=182;break;case 170:if(e.prev=170,e.t4=e["catch"](166),console.log(te),console.log(e.t4),y(!1),"underflow"!==e.t4.fault){e.next=180;break}return w(e.t4.fault),e.abrupt("return",new u["a"](e.t4.fault));case 180:return w("userHasSufficientBalance"),e.abrupt("return",new u["a"]("unknow error"));case 182:if(te){e.next=186;break}return w("Not enough balance"),y(!1),e.abrupt("return",new u["a"]("Not enough balance"));case 186:if(console.log("------------------ BREAKDOWN ------------------"),Q){e.next=210;break}return e.next=190,Object(u["r"])(K.liquidityToken,d,j);case 190:ne=e.sent,console.log("Liquidity Minted"),console.log(K.liquidityToken),e.prev=193,ae=K.getLiquidityMinted(ne,z,V),oe=new s["g"](ae.raw,ne.add(ae).raw).toFixed(4),k(["Pool reserve: ".concat(K.reserve0.toFixed(3)," ").concat(K.token0.symbol," + ").concat(K.reserve1.toFixed(3)," ").concat(K.token1.symbol),"Pool share: ".concat(oe,"%")]),e.next=208;break;case 199:if(e.prev=199,e.t5=e["catch"](193),!(e.t5 instanceof s["e"])){e.next=205;break}return w("Insufficient reserve!"),y(!1),e.abrupt("return",new u["a"]("Insufficient reserve!"));case 205:return w("Unhandled exception!"),y(!1),e.abrupt("return",new u["a"]("Unhandled exception!"));case 208:e.next=211;break;case 210:k(["Ready to create ".concat(L," ").concat(U," liquidity pool.")]);case 211:if(console.log("------------------ ALLOWANCE ------------------"),re=0,B){e.next=220;break}return e.next=216,Object(u["i"])(P,z.raw.toString(),d,j);case 216:ce=e.sent,console.log("token 0 approved?"),console.log(ce),ce||(console.log("Not enough allowance"),x(z.raw.toString()),g(!0),f(!0),re+=1);case 220:if(M){e.next=228;break}return console.log("Inside addLiquidity, amount needed: ".concat(V.raw.toString())),e.next=224,Object(u["i"])(R,V.raw.toString(),d,j);case 224:se=e.sent,console.log("token 1 approved?"),console.log(se),se||(console.log("Not enough allowance for token1"),m(V.raw.toString()),O(!0),v(!0),re+=2);case 228:if(!(re>0)){e.next=232;break}return y(!1),w("Need approval"),e.abrupt("return",new u["a"]("Need approve ".concat(1===re?L:2===re?U:"".concat(L," and ").concat(U))));case 232:y(!0),w(Q?"Create a new pool":"Add liquidity"),console.log("------------------ PREPARE ADD LIQUIDITY ------------------"),console.log("parsed token 0 amount"),console.log(z.raw),console.log("parsed token 1 amount"),console.log(V.raw),console.log("slippage"),console.log(a),B||M?(ie=o.estimateGas.addLiquidityETH,le=o.addLiquidityETH,de=B?J:Y,je=B?V:z,he=B?Object(u["h"])(z,Q?0:a)[0].toString():Object(u["h"])(V,Q?0:a)[0].toString(),ue=[de.address,je.raw.toString(),Object(u["h"])(je,Q?0:a)[0].toString(),he,j,"0x".concat((Math.floor((new Date).getTime()/1e3)+60).toString(16))],be=i["a"].from((M?V:z).raw.toString()),console.log(be)):(ie=o.estimateGas.addLiquidity,le=o.addLiquidity,ue=[P,R,z.raw.toString(),V.raw.toString(),Object(u["h"])(z,Q?0:a)[0].toString(),Object(u["h"])(V,Q?0:a)[0].toString(),j,"0x".concat((Math.floor((new Date).getTime()/1e3)+60).toString(16))],be=null),console.log("args"),console.log(ue),console.log("estimate"),console.log(ie),console.log("method"),console.log(le),console.log("value"),console.log(be),q(ue),A(be);case 252:case"end":return e.stop()}}),e,null,[[65,69],[83,87],[104,108],[136,141],[166,170],[193,199]])})))();case 26:P=e.sent,P instanceof u["a"]?w(P.getErrorText()):console.log(P);case 28:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function h(e,t){return p.apply(this,arguments)}function p(){return p=Object(o["a"])(c.a.mark((function e(t,n){var r,i,l,d,j,h,p,g,O,x,m,f,v,k,w=arguments;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=w.length>2&&void 0!==w[2]?w[2]:u["c"],!(w.length>3&&void 0!==w[3])||w[3],i=w.length>4?w[4]:void 0,l=w.length>5?w[5]:void 0,d=w.length>6?w[6]:void 0,j=w.length>7?w[7]:void 0,h=w.length>8?w[8]:void 0,p=w.length>9?w[9]:void 0,g=w.length>10?w[10]:void 0,O=w.length>11?w[11]:void 0,x=w.length>12?w[12]:void 0,m=w.length>13?w[13]:void 0,f=w.length>14?w[14]:void 0,e.next=15,Object(o["a"])(c.a.mark((function e(){var o,b,m,f,v,k,w,y,S,T,C,E,N,I;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(s["c"]),o=Object(u["p"])(l,d),b=t.address,m=t.symbol,f=t.decimals,t.amount,v=n.address,k=n.symbol,w=n.decimals,n.amount,y="ETH"===m,S="ETH"===k,console.log("------------------ RECEIVED TOKEN ------------------"),console.log("token0"),console.log(t),console.log("token1"),console.log(n),!y||!S){e.next=13;break}return e.abrupt("return",new u["a"]("Doesn't support ETH to ETH"));case 13:if(!(y&&"WETH"===k||"WETH"===m&&S)){e.next=15;break}return e.abrupt("return",new u["a"]("Invalid pair WETH/ETH"));case 15:if(console.log("ADD LIQUIDITY"),console.log("------------------ CONSTRUCT TOKEN ------------------"),T=y?s["n"][i]:new s["j"](i,b,f,m),C=S?s["n"][i]:new s["j"](i,v,w,k),!T.equals(C)){e.next=21;break}return e.abrupt("return",new u["a"]("Equal tokens!"));case 21:return console.log("------------------ CONSTRUCT PAIR ------------------"),console.log("FETCH pair"),console.log(j),console.log(h),console.log("------------------ PARSE AMOUNT ------------------"),console.log(p),console.log(g),console.log("------------------ CHECK BALANCE ------------------"),console.log("------------------ BREAKDOWN ------------------"),console.log("------------------ ALLOWANCE ------------------"),console.log("------------------ PREPARE ADD LIQUIDITY ------------------"),y||S?(E=o.estimateGas.addLiquidityETH,N=o.addLiquidityETH,console.log(O),console.log(x)):(E=o.estimateGas.addLiquidity,N=o.addLiquidity,console.log(O),console.log(x)),console.log("parsed token 0 amount"),console.log(p.raw),console.log("parsed token 1 amount"),console.log(g.raw),console.log("slippage"),console.log(r),console.log(E),console.log(N),console.log(O),console.log(x),e.next=45,E(...O,x?{value:x}:{}).then((e=>N(...O,Object(a["a"])(Object(a["a"])({},x?{value:x}:{}),{},{gasLimit:Object(u["g"])(e)})).catch((e=>new u["a"]("CustomError in transaction")))));case 45:return I=e.sent,e.abrupt("return",I);case 47:case"end":return e.stop()}}),e)})))();case 15:return v=e.sent,v instanceof u["a"]?m(v.getErrorText()):(console.log("status"),console.log(v),k="https://rinkeby.etherscan.io/tx/"+v.hash,f(v),m(Object(b["jsx"])("a",{href:k,target:"_blank",children:"View it on etherscan"}))),e.abrupt("return");case 18:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}},"2u47":function(e){e.exports=JSON.parse("{}")},N82c:function(e){e.exports=JSON.parse("{}")},QEXP:function(e,t,n){e.exports=n.p+"static/loading.fbc4a581.svg"},R1Dz:function(e,t,n){"use strict";var a=n("q1tI");t["a"]=Object(a["createContext"])()},"S/9j":function(e,t,n){"use strict";function a(e){var t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/".concat(t.slice(0,n+1).join("/"))))}n.d(t,"a",(function(){return a}))},kiEm:function(e,t,n){"use strict";n.r(t);n("+L6B");var a,o,r=n("2/Rp"),c=n("q1tI"),s=n("9kvl"),i=n("THqM"),l=(n("Pwec"),n("CtXQ")),u=(n("5NDa"),n("5rEg")),b=n("k1fw"),d=n("9og8"),j=n("tJVT"),h=n("WmNS"),p=n.n(h),g=n("nkYg"),O=n("vDqi"),x=n.n(O),m=n("+Ri4"),f=n.n(m),v=(n("+n12"),n("Z6YE")),k=n("jUKV"),w=n("O/14"),y=(n("2u47"),n("N82c"),n("GUrf"),n("1OZD")),S=n("QEXP"),T=n.n(S),C=n("wd/R"),E=n.n(C),N=n("nKUr"),I=i["t"].AcyTabPane,q=e=>{for(var t=e.dispatch,n=e.token,a=e.onLoggedIn,o=Object(c["useState"])(null),s=Object(j["a"])(o,2),h=s[0],O=s[1],m=Object(c["useState"])(!0),S=Object(j["a"])(m,2),C=S[0],q=S[1],A=g["a"][0],P=g["a"][1],L=0;L<g["a"].length;L++)g["a"][L].symbol==n.token1&&(A=g["a"][L]),g["a"][L].symbol==n.token2&&(P=g["a"][L]);var H=Object(c["useState"])(A),D=Object(j["a"])(H,2),R=D[0],U=D[1],F=Object(c["useState"])(P),W=Object(j["a"])(F,2),B=W[0],M=W[1],Y=Object(c["useState"])("0"),J=Object(j["a"])(Y,2),K=J[0],Q=J[1],G=Object(c["useState"])("0"),z=Object(j["a"])(G,2),V=z[0],_=z[1],X=Object(c["useState"])(),Z=Object(j["a"])(X,2),$=Z[0],ee=Z[1],te=Object(c["useState"])(),ne=Object(j["a"])(te,2),ae=ne[0],oe=ne[1],re=Object(c["useState"])(!1),ce=Object(j["a"])(re,2),se=ce[0],ie=ce[1],le=Object(c["useState"])(!1),ue=Object(j["a"])(le,2),be=ue[0],de=ue[1],je=Object(c["useState"])(!0),he=Object(j["a"])(je,2),pe=he[0],ge=he[1],Oe=Object(c["useState"])(w["c"]/100),xe=Object(j["a"])(Oe,2),me=xe[0],fe=xe[1],ve=Object(c["useState"])(w["c"]/100),ke=Object(j["a"])(ve,2),we=ke[0],ye=ke[1],Se=Object(c["useState"])(""),Te=Object(j["a"])(Se,2),Ce=Te[0],Ee=Te[1],Ne=Object(c["useState"])(!1),Ie=Object(j["a"])(Ne,2),qe=Ie[0],Ae=Ie[1],Pe=Object(c["useState"])(!1),Le=Object(j["a"])(Pe,2),He=Le[0],De=Le[1],Re=Object(c["useState"])("0"),Ue=Object(j["a"])(Re,2),Fe=Ue[0],We=Ue[1],Be=Object(c["useState"])("0"),Me=Object(j["a"])(Be,2),Ye=Me[0],Je=Me[1],Ke=Object(c["useState"])(!1),Qe=Object(j["a"])(Ke,2),Ge=Qe[0],ze=Qe[1],Ve=Object(c["useState"])(!1),_e=Object(j["a"])(Ve,2),Xe=_e[0],Ze=_e[1],$e=Object(c["useState"])(),et=Object(j["a"])($e,2),tt=et[0],nt=et[1],at=Object(c["useState"])("Connect to wallet"),ot=Object(j["a"])(at,2),rt=ot[0],ct=ot[1],st=Object(c["useState"])(!0),it=Object(j["a"])(st,2),lt=it[0],ut=it[1],bt=Object(c["useState"])(),dt=Object(j["a"])(bt,2),jt=dt[0],ht=dt[1],pt=Object(c["useState"])(),gt=Object(j["a"])(pt,2),Ot=gt[0],xt=gt[1],mt=Object(c["useState"])(),ft=Object(j["a"])(mt,2),vt=ft[0],kt=ft[1],wt=Object(c["useState"])(null),yt=Object(j["a"])(wt,2),St=yt[0],Tt=yt[1],Ct=Object(c["useState"])(),Et=Object(j["a"])(Ct,2),Nt=Et[0],It=Et[1],qt=Object(c["useState"])(),At=Object(j["a"])(qt,2),Pt=At[0],Lt=At[1],Ht=Object(c["useState"])(),Dt=Object(j["a"])(Ht,2),Rt=Dt[0],Ut=Dt[1],Ft=Object(c["useState"])(),Wt=Object(j["a"])(Ft,2),Bt=Wt[0],Mt=Wt[1],Yt=Object(c["useState"])(""),Jt=Object(j["a"])(Yt,2),Kt=Jt[0],Qt=Jt[1],Gt=Object(c["useState"])(g["a"]),zt=Object(j["a"])(Gt,2),Vt=zt[0],_t=zt[1],Xt=Object(c["useState"])(!1),Zt=Object(j["a"])(Xt,2),$t=Zt[0],en=Zt[1],tn=Object(c["useState"])(!1),nn=Object(j["a"])(tn,2),an=nn[0],on=nn[1],rn=e=>{Qt(e.target.value),_t(g["a"].filter((t=>t.symbol.includes(e.target.value.toUpperCase()))))},cn=Object(c["useState"])([]),sn=Object(j["a"])(cn,2),ln=(sn[0],sn[1],Object(v["b"])()),un=ln.account,bn=ln.chainId,dn=ln.library,jn=ln.activate,hn=new k["a"]({supportedChainIds:[1,3,4,5,42,80001]});Object(c["useEffect"])((()=>{jn(hn);var e=JSON.parse(localStorage.getItem("tokens_symbol"));null!=e&&wn(g["a"].filter((t=>e.includes(t.symbol))))}),[un]);var pn=Object(c["useCallback"])(Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R&&B){e.next=2;break}return e.abrupt("return");case 2:if(pe){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(y["b"])(Object(b["a"])(Object(b["a"])({},R),{},{amount:$}),Object(b["a"])(Object(b["a"])({},B),{},{amount:ae}),100*me,pe,bn,dn,un,ee,oe,Ae,De,We,Je,ze,Ze,nt,ct,ut,ht,xt,kt,Tt,It,Lt,Ut,Mt);case 6:case"end":return e.stop()}}),e)}))),[R,B,$,ae,me,pe,bn,dn,un]),gn=Object(c["useCallback"])(Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(R&&B){e.next=2;break}return e.abrupt("return");case 2:if(!pe){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(y["b"])(Object(b["a"])(Object(b["a"])({},R),{},{amount:$}),Object(b["a"])(Object(b["a"])({},B),{},{amount:ae}),100*me,pe,bn,dn,un,ee,oe,Ae,De,We,Je,ze,Ze,nt,ct,ut,ht,xt,kt,Tt,It,Lt,Ut,Mt);case 6:case"end":return e.stop()}}),e)}))),[R,B,$,ae,me,pe,bn,dn,un]);Object(c["useEffect"])((()=>{pn()}),[R,B,$,ae,me,pe,bn,dn,un]),Object(c["useEffect"])((()=>{gn()}),[R,B,$,ae,me,pe,bn,dn,un]),Object(c["useEffect"])((()=>{void 0==un?(ut(!0),ct("Connect to Wallet")):(ct("Choose tokens and amount"),ut(!1),a())}),[bn,dn,un]),Object(c["useEffect"])((()=>{var e=()=>document.getElementById("liquidity-token-search-input").focus();!0===h&&setTimeout(e,100)}),[h]);var On=()=>{O(!0)},xn=()=>{O(!1)};Object(c["useEffect"])((()=>{function e(){return t.apply(this,arguments)}function t(){return t=Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ie(!0),de(!0),e.t0=Q,e.next=5,Object(w["s"])(R,bn,un,dn);case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=_,e.next=10,Object(w["s"])(B,bn,un,dn);case 10:e.t3=e.sent,(0,e.t2)(e.t3);case 12:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}un&&bn&&dn&&(console.log("get balances in liquidity"),e())}),[un,bn,dn,R,B]);var mn=function(){var e=Object(d["a"])(p.a.mark((function e(t){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(xn(),!C){e.next=15;break}if(void 0!=un){e.next=6;break}alert("Please connect to your account"),e.next=13;break;case 6:return U(t),e.t0=Q,e.next=10,Object(w["s"])(t,bn,un,dn);case 10:e.t1=e.sent,(0,e.t0)(e.t1),ie(!0);case 13:e.next=26;break;case 15:if(void 0!=un){e.next=19;break}alert("Please connect to your account"),e.next=26;break;case 19:return M(t),e.t2=_,e.next=23,Object(w["s"])(t,bn,un,dn);case 23:e.t3=e.sent,(0,e.t2)(e.t3),de(!0);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fn=Object(c["useState"])([]),vn=Object(j["a"])(fn,2),kn=vn[0],wn=vn[1],yn=e=>{wn((t=>{var n=[...t];if(n.includes(e)){var a=n.filter((t=>t!=e));return localStorage.setItem("token",JSON.stringify(a.map((e=>e.addressOnEth)))),localStorage.setItem("tokens_symbol",JSON.stringify(a.map((e=>e.symbol)))),a}return n.push(e),localStorage.setItem("token",JSON.stringify(n.map((e=>e.addressOnEth)))),localStorage.setItem("tokens_symbol",JSON.stringify(n.map((e=>e.symbol)))),n}))},Sn=n=>{console.log("test status:",n);var a=e.transaction.transactions,o=a.filter((e=>e.hash==n.hash)).length;console.log("is current dispatched? ",o),0==o&&t({type:"transaction/addTransaction",payload:{transactions:[...a,{hash:n.hash}]}}),console.log("test test see how many times setInterval is called");var r=function(){var e=Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dn.getTransactionReceipt(n.hash).then(function(){var e=Object(d["a"])(p.a.mark((function e(o){var c,s,i,l;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("receipt ",o),o){e.next=5;break}setTimeout(r,500),e.next=14;break;case 5:return e.next=7,dn.getBlock(o.logs[0].blockNumber).then((e=>{c=E()(parseInt(1e3*e.timestamp)).format("YYYY-MM-DD HH:mm:ss"),console.log("test transactionTime: ",c)}));case 7:s=a.filter((e=>e.hash!=n.hash)),t({type:"transaction/addTransaction",payload:{transactions:[...s,{hash:n.hash,transactionTime:c}]}}),ut(!0),console.log(rt),ct(rt),console.log("test pair to add on server",St),St&&(i=St.token0,l=St.token1,x.a.post("https://api.acy.finance/api/pool/update?walletId=".concat(un,"&action=add&token0=").concat(i,"&token1=").concat(l)).then((e=>{console.log("add to server return: ",e)})).catch((e=>console.log("error: ",e))));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()},Tn=e.liquidity;return Object(c["useEffect"])(Object(d["a"])(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("liquidity updated"),console.log("liquidity state: ",Tn),t=Tn.token0,n=Tn.token1,console.log("new tokens to set in addComponent, ",t,n),!t||!n){e.next=22;break}return t=Vt.filter((e=>e.symbol===t.symbol))[0],n=Vt.filter((e=>e.symbol===n.symbol))[0],console.log("fetched token ds",t,n),U(t),e.t0=Q,e.next=12,Object(w["s"])(t,bn,un,dn);case 12:return e.t1=e.sent,(0,e.t0)(e.t1),ie(!0),M(n),e.t2=_,e.next=19,Object(w["s"])(n,bn,un,dn);case 19:e.t3=e.sent,(0,e.t2)(e.t3),de(!0);case 22:case"end":return e.stop()}}),e)}))),[Tn]),Object(N["jsxs"])("div",{children:[Object(N["jsx"])(i["j"],{icon:"eth",title:se&&"Balance: ".concat(parseFloat(K).toFixed(5)),logoURI:R&&R.logoURI,coin:R&&R.symbol||"Select",yuan:"566.228",dollar:"".concat(K),token:$,onChoseToken:Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:On(),q(!0);case 2:case"end":return e.stop()}}),e)}))),onChangeToken:e=>{console.log("onChangeToken"),ge(!0),ee(e)}}),Object(N["jsx"])("div",{style:{margin:"12px auto",textAlign:"center"},children:Object(N["jsx"])(i["l"],{width:21.5,name:"plus_light"})}),Object(N["jsx"])(i["j"],{icon:"eth",title:be&&"Balance: ".concat(parseFloat(V).toFixed(5)),logoURI:B&&B.logoURI,coin:B&&B.symbol||"Select",yuan:"566.228",dollar:"".concat(V),token:ae,onChoseToken:Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:On(),q(!1);case 2:case"end":return e.stop()}}),e)}))),onChangeToken:e=>{ge(!1),oe(e)}}),Object(N["jsx"])(i["k"],{children:tt&&Object(N["jsxs"])(N["Fragment"],{children:[Object(N["jsx"])("div",{className:f.a.breakdownTopContainer,children:Object(N["jsxs"])("div",{className:f.a.slippageContainer,children:[Object(N["jsx"])("span",{style:{fontWeight:600},children:"Slippage tolerance"}),Object(N["jsxs"])("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"7px"},children:[Object(N["jsx"])(r["a"],{type:"link",style:{marginRight:"5px"},children:"Auto"}),Object(N["jsx"])(u["a"],{value:we||"",onChange:e=>{ye(e.target.value)},suffix:Object(N["jsx"])("strong",{children:"%"})}),Object(N["jsx"])(r["a"],{type:"primary",style:{marginLeft:"10px",background:"#2e3032",borderColor:"transparent"},onClick:()=>{isNaN(we)?Ee("Please input valid slippage value!"):(Ee(""),fe(parseFloat(we)))},children:"Set"})]}),Ce.length>0&&Object(N["jsx"])("span",{style:{fontWeight:600,color:"#c6224e"},children:Ce})]})}),Object(N["jsx"])("div",{className:f.a.acyDescriptionContainer,children:tt.map((e=>Object(N["jsx"])(i["k"].Item,{children:Object(N["jsx"])("div",{className:f.a.acyDescriptionItem,children:e})})))})]})}),1==Ge&&Object(N["jsxs"])("div",{children:[Object(N["jsxs"])(i["d"],{variant:"warning",onClick:Object(d["a"])(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return en(!0),Ae(!1),e.next=4,Object(w["e"])(R.address,Fe,dn,un);case 4:if(t=e.sent,Ae(!0),en(!1),1!=t){e.next=12;break}return Ae(!1),e.next=11,Object(y["b"])(Object(b["a"])(Object(b["a"])({},R),{},{amount:$}),Object(b["a"])(Object(b["a"])({},B),{},{amount:ae}),100*me,pe,bn,dn,un,ee,oe,Ae,De,We,Je,ze,Ze,nt,ct,ut,ht,xt,kt,Tt,It,Lt,Ut,Mt);case 11:0==He&&(vt?ut("Create new pool"):ct("Add liquidity"),ut(!0));case 12:case"end":return e.stop()}}),e)}))),disabled:!qe,children:["Approve ",R&&R.symbol,$t&&Object(N["jsx"])("img",{style:{width:30,height:30,marginLeft:"1%"},src:T.a,className:f.a.spinner,alt:"spinner"})]})," "]}),1==Xe&&Object(N["jsx"])("div",{children:Object(N["jsxs"])(i["d"],{variant:"warning",onClick:Object(d["a"])(p.a.mark((function e(){var t;return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return on(!0),De(!1),e.next=4,Object(w["e"])(B.address,Ye,dn,un);case 4:if(t=e.sent,De(!0),on(!1),1!=t){e.next=12;break}return De(!1),e.next=11,Object(y["b"])(Object(b["a"])(Object(b["a"])({},R),{},{amount:$}),Object(b["a"])(Object(b["a"])({},B),{},{amount:ae}),me,pe,bn,dn,un,ee,oe,Ae,De,We,Je,ze,Ze,nt,ct,ut,ht,xt,kt,Tt,It,Lt,Ut,Mt);case 11:0==qe&&(vt?ut("Create new pool"):ct("Add liquidity"),ut(!0));case 12:case"end":return e.stop()}}),e)}))),disabled:!He,children:["Approve ",B&&B.symbol,an&&Object(N["jsx"])("img",{style:{width:30,height:30,marginLeft:"1%"},src:T.a,className:f.a.spinner,alt:"spinner"})]})}),Object(N["jsx"])(i["d"],{variant:"success",disabled:!lt,onClick:Object(d["a"])(p.a.mark((function e(){return p.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!=un){e.next=6;break}jn(hn),ct("Choose tokens and amount"),ut(!1),e.next=10;break;case 6:return ut(!1),ct(Object(N["jsxs"])(N["Fragment"],{children:["Processing ",Object(N["jsx"])(l["a"],{type:"loading"})]})),e.next=10,Object(y["a"])(Object(b["a"])(Object(b["a"])({},R),{},{amount:$}),Object(b["a"])(Object(b["a"])({},B),{},{amount:ae}),100*me,pe,bn,dn,un,Ot,vt,Nt,Pt,Rt,Bt,ht,Sn);case 10:case"end":return e.stop()}}),e)}))),children:rt}),Object(N["jsx"])(i["k"],{children:jt&&Object(N["jsx"])(i["k"].Item,{children:jt})}),Object(N["jsxs"])(i["p"],{onCancel:xn,width:400,visible:h,children:[Object(N["jsx"])("div",{className:f.a.title,children:"Select a token"}),Object(N["jsx"])("div",{className:f.a.search,children:Object(N["jsx"])(u["a"],{size:"large",style:{backgroundColor:"#373739",borderRadius:"40px"},placeholder:"Enter the token symbol or address",value:Kt,onChange:rn,id:"liquidity-token-search-input"})}),Object(N["jsx"])("div",{className:f.a.coinList,children:Object(N["jsxs"])(i["t"],{children:[Object(N["jsx"])(I,{tab:"All",children:Vt.map(((e,t)=>Object(N["jsx"])(i["g"],{data:e,customIcon:!1,setAsFav:()=>yn(e),selectToken:()=>{mn(e)},isFav:kn.includes(e)},t)))},"1"),Object(N["jsx"])(I,{tab:"Favorite",children:kn.map(((e,t)=>Object(N["jsx"])(i["g"],{data:e,selectToken:()=>yn(t),customIcon:!1,index:t,setAsFav:()=>yn(n),hideFavButton:!0,isFav:kn.includes(e)},t)))},"2")]})})]})]})},A=Object(s["b"])((e=>{var t=e.global,n=e.transaction,a=e.loading,o=e.liquidity;return{global:t,transaction:n,loading:a.global,liquidity:o}}))(q),P=n("zHco"),L=n("EYsQ"),H=n.n(L),D=i["t"].AcyTabPane,R=(a=Object(s["b"])((e=>{var t=e.profile,n=e.loading;return{profile:t,loading:n.effects["profile/fetchBasic"]}})),a(o=class extends c["Component"]{constructor(){super(...arguments),this.state={visible:!1,visibleConfirmOrder:!1,visibleLoading:!1,tabIndex:1,loggedIn:!1},this.lineTitleRender=()=>[Object(N["jsxs"])("div",{children:[Object(N["jsxs"])("div",{className:H.a.maintitle,children:[Object(N["jsx"])("span",{className:H.a.lighttitle,children:"ETH"}),"/BTC"]}),Object(N["jsxs"])("div",{className:H.a.secondarytitle,children:[Object(N["jsx"])("span",{className:H.a.lighttitle,children:"212.123"})," ",Object(N["jsx"])("span",{className:H.a.percentage,children:"+12.45%"})," 2021.07.11"]})]}),Object(N["jsx"])(i["q"],{onhandPeriodTimeChoose:this.onhandPeriodTimeChoose,className:H.a.pt,times:["1D","7D","1M","1Y","All"]})],this.onhandPeriodTimeChoose=e=>{console.log(e)},this.onClickCoin=()=>{this.setState({visible:!0})},this.onCancel=()=>{this.setState({visible:!1})},this.onHandModalConfirmOrder=e=>{this.setState({visibleConfirmOrder:!!e})},this.onChangeTabs=e=>{this.setState({tabIndex:e})},this.onLoggedIn=()=>{this.setState({loggedIn:!0})}}componentDidMount(){}render(){var e=this.state,t=e.visible,n=e.visibleConfirmOrder,a=e.visibleLoading,o=(e.tabIndex,e.loggedIn),c="";return this.props.location.state&&(c=this.props.location.state,console.log(c)),Object(N["jsxs"])(P["a"],{children:[Object(N["jsxs"])("div",{className:o?H.a.main:H.a.main_notLoggedIn,children:[Object(N["jsx"])("div",{children:o&&Object(N["jsx"])(i["o"],{})}),Object(N["jsx"])("div",{children:Object(N["jsx"])(i["e"],{style:{backgroundColor:"#0e0304",padding:"10px"},children:Object(N["jsx"])("div",{className:H.a.addLiquidity,children:Object(N["jsx"])(A,{token:c,onLoggedIn:this.onLoggedIn})})})})]}),Object(N["jsxs"])(i["p"],{onCancel:this.onCancel,width:600,visible:t,children:[Object(N["jsxs"])("div",{className:H.a.title,children:[Object(N["jsx"])(i["l"],{name:"back"})," Select a token"]}),Object(N["jsx"])("div",{className:H.a.search,children:Object(N["jsx"])(i["m"],{placeholder:"Enter the token symbol or address",suffix:Object(N["jsx"])(i["l"],{name:"search"})})}),Object(N["jsx"])("div",{className:H.a.coinList,children:Object(N["jsxs"])(i["t"],{children:[Object(N["jsxs"])(D,{tab:"All",children:[Object(N["jsx"])(i["g"],{}),Object(N["jsx"])(i["g"],{}),Object(N["jsx"])(i["g"],{}),Object(N["jsx"])(i["g"],{})]},"1"),Object(N["jsx"])(D,{tab:"Favorite"},"2"),Object(N["jsx"])(D,{tab:"Index"},"3"),Object(N["jsx"])(D,{tab:"Synth"},"4")]})})]}),Object(N["jsx"])(i["h"],{onCancel:this.onHandModalConfirmOrder,title:"Comfirm Order",visible:n,children:Object(N["jsxs"])("div",{className:H.a.confirm,children:[Object(N["jsx"])("p",{children:"ETH\uff1a 566.228"}),Object(N["jsx"])("p",{children:"BTC\uff1a2.669"}),Object(N["jsx"])("p",{children:"Price\uff1a212.123"}),Object(N["jsx"])("p",{children:"Price Impact\uff1a2.232%"}),Object(N["jsx"])("p",{children:"Liquidity Provide Fee: 0.321%"}),Object(N["jsx"])("p",{children:"Alpha: 0.371%"}),Object(N["jsx"])("p",{children:"Maximum sold: 566.221"}),Object(N["jsx"])(r["a"],{size:"large",type:"primary",children:"Confirm"})]})}),Object(N["jsx"])(i["b"],{onCancel:()=>this.setState({visibleLoading:!1}),visible:a})]})}})||o);t["default"]=R},zHco:function(e,t,n){"use strict";var a=n("PpiC"),o=n("q1tI"),r=(n("cWXX"),n("/ezw"),n("k1fw"),n("Znn+"),n("ZTPi")),c=(n("TSYQ"),n("PCKb"),n("sPJy"),n("bE4q"),n("vRGJ"),n("S/9j"),n("nKUr"));o["PureComponent"];r["a"].TabPane;o["PureComponent"];var s=n("9kvl"),i=n("GvbY"),l=n.n(i);class u extends o["PureComponent"]{render(){var e=this.props,t=e.contentWidth,n=e.children,a="".concat(l.a.main);return"Fixed"===t&&(a="".concat(l.a.main," ").concat(l.a.wide)),Object(c["jsx"])("div",{className:a,children:n})}}var b=Object(s["b"])((e=>{var t=e.setting;return{contentWidth:t.contentWidth}}))(u),d=n("U0CE"),j=n.n(d),h=(n("R1Dz"),e=>{var t=e.children,n=(e.contentWidth,e.wrapperClassName),o=e.top;Object(a["a"])(e,["children","contentWidth","wrapperClassName","top"]);return Object(c["jsxs"])("div",{style:{margin:"-24px -24px 0"},className:n,children:[o,t?Object(c["jsx"])("div",{className:j.a.content,children:Object(c["jsx"])(b,{children:t})}):null]})});t["a"]=Object(s["b"])((e=>{var t=e.setting;return{contentWidth:t.contentWidth}}))(h)}}]);